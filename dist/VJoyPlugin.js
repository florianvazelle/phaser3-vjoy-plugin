!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("phaser")):"function"==typeof define&&define.amd?define(["phaser"],t):"object"==typeof exports?exports.VJoyPlugin=t(require("phaser")):e.VJoyPlugin=t(e.Phaser)}(self,(function(e){return t={808:(e,t,s)=>{
/**
 * @author       Florian Vazelle <ponythugflorian@gmail.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
var i=s(536),n=new i.Class({Extends:i.GameObjects.GameObject,Mixins:[i.GameObjects.Components.Transform],initialize:function(e,t){i.GameObjects.GameObject.call(this,e,"Joystick"),this.cursors=new i.Math.Vector2(0,0),this.singleDirection=void 0===t.singleDirection||t.singleDirection,this.maxDistanceInPixels=void 0===t.maxDistanceInPixels?200:t.maxDistanceInPixels,this.device=void 0===t.device?0:t.device;var s=[];s.push(this.scene.add.sprite(0,0,t.sprites.cap));for(var n=0;n<this.maxDistanceInPixels;n+=100)s.push(this.scene.add.sprite(0,0,t.sprites.body));s.push(this.scene.add.sprite(0,0,t.sprites.base)),this.layer=this.scene.add.layer(s),this.layer.setVisible(!1),this.setPosition(0,0),this.setActive(!1),this.scene.input.on(i.Input.Events.POINTER_DOWN,this.onKeyDown,this),this.scene.input.on(i.Input.Events.POINTER_UP,this.onKeyUp,this),this.scene.add.existing(this)},deltaX:{get:function(){return this.cursors.x}},deltaY:{get:function(){return this.cursors.y}},onKeyDown:function(e){this.setActive(!0),this.layer.setVisible(!0),this.layer.each((function(t){t.setScrollFactor(0),t.x=e.x,t.y=e.y}),this),this.setPosition(e.x,e.y)},onKeyUp:function(e){this.setActive(!1),this.layer.setVisible(!1),this.cursors=new i.Math.Vector2(0,0)},preUpdate:function(e,t){var s=this.scene.sys.input.manager.pointers[this.device].position,n=s.x-this.x,o=s.y-this.y,r=Math.sqrt(n*n+o*o);this.singleDirection&&(Math.abs(n)>Math.abs(o)?o=0:n=0);var a=Math.atan2(o,n);r>this.maxDistanceInPixels&&(n=Math.cos(a)*this.maxDistanceInPixels,o=Math.sin(a)*this.maxDistanceInPixels),this.cursors=new i.Math.Vector2(n,o);var c=0;this.layer.each((function(e){e.x=this.x+n*c/3,e.y=this.y+o*c/3,c++}),this)}});e.exports=n},567:(e,t,s)=>{
/**
 * @author       Florian Vazelle <ponythugflorian@gmail.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
var i=s(536),n=s(808),o=new i.Class({Extends:i.Plugins.ScenePlugin,initialize:function(e,t){i.Plugins.ScenePlugin.call(this,e,t),t.registerGameObject("joystick",this.joystickFactory,this.joystickCreator)},joystickFactory:function(e){return new n(this.scene,e)},joystickCreator:function(e,t){void 0===e&&(e={});var s=i.Utils.Objects.GetValue(e,"settings",null),o=new n(this.scene,s);return void 0!==t&&(e.add=t),i.GameObjects.BuildGameObject(this.scene,o,e),o},boot:function(){this.systems.events.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},destroy:function(){this.game=null,this.scene=null,this.systems=null},gameDestroy:function(){this.pluginManager.removeGameObject("joystick",!0,!0),this.pluginManager=null}});e.exports=o},536:t=>{"use strict";t.exports=e}},s={},i=function e(i){var n=s[i];if(void 0!==n)return n.exports;var o=s[i]={exports:{}};return t[i](o,o.exports,e),o.exports}(567),i;var t,s,i}));